{"ast":null,"code":"import React from'react';import{Link}from'react-router-dom';import{Heart,MessageCircle,Share2,Bookmark,MoreHorizontal,Clock,Users,Eye}from'lucide-react';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const PostCard=_ref=>{let{post,onLike,onBookmark}=_ref;const formatTime=dateString=>{const date=new Date(dateString);const now=new Date();const diff=now.getTime()-date.getTime();const hours=Math.floor(diff/(1000*60*60));if(hours<1){const minutes=Math.floor(diff/(1000*60));return\"\".concat(minutes,\"\\u5206\\u949F\\u524D\");}else if(hours<24){return\"\".concat(hours,\"\\u5C0F\\u65F6\\u524D\");}else{const days=Math.floor(hours/24);return\"\".concat(days,\"\\u5929\\u524D\");}};const handleLike=()=>{onLike===null||onLike===void 0?void 0:onLike(post.id);};const handleBookmark=()=>{onBookmark===null||onBookmark===void 0?void 0:onBookmark(post.id);};return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border border-gray-200\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-4 border-b border-gray-100\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"img\",{src:post.author.avatar_url,alt:post.author.nickname,className:\"w-10 h-10 rounded-full\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-medium text-gray-900\",children:post.author.nickname}),post.author.is_verified&&/*#__PURE__*/_jsx(\"span\",{className:\"text-blue-500 text-xs\",children:\"\\u2713\"}),post.circle&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-400\",children:\"\\xB7\"}),/*#__PURE__*/_jsxs(Link,{to:\"/circles/\".concat(post.circle.id),className:\"text-sm text-primary-600 hover:text-primary-700 flex items-center\",children:[/*#__PURE__*/_jsx(Users,{className:\"w-3 h-3 mr-1\"}),post.circle.name]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-sm text-gray-500\",children:[/*#__PURE__*/_jsx(Clock,{className:\"w-3 h-3 mr-1\"}),formatTime(post.created_at)]})]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"p-2 hover:bg-gray-100 rounded-full\",children:/*#__PURE__*/_jsx(MoreHorizontal,{className:\"w-4 h-4 text-gray-400\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-4\",children:[/*#__PURE__*/_jsxs(Link,{to:\"/posts/\".concat(post.id),className:\"block\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-medium text-gray-900 mb-2 hover:text-primary-600\",children:post.title}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-700 leading-relaxed mb-4 line-clamp-3\",children:post.content})]}),post.tags.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap gap-2 mb-4\",children:post.tags.map(tag=>/*#__PURE__*/_jsxs(\"span\",{className:\"inline-block px-2 py-1 text-xs bg-gray-100 text-gray-600 rounded-full\",children:[\"#\",tag]},tag))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between px-4 py-3 border-t border-gray-100\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-6\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:handleLike,className:\"flex items-center space-x-1 transition-colors \".concat(post.is_liked?'text-red-500':'text-gray-500 hover:text-red-500'),children:[/*#__PURE__*/_jsx(Heart,{className:\"w-5 h-5 \".concat(post.is_liked?'fill-current':'')}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm\",children:post.likes_count})]}),/*#__PURE__*/_jsxs(Link,{to:\"/posts/\".concat(post.id),className:\"flex items-center space-x-1 text-gray-500 hover:text-primary-600 transition-colors\",children:[/*#__PURE__*/_jsx(MessageCircle,{className:\"w-5 h-5\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm\",children:post.comments_count||0})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"flex items-center space-x-1 text-gray-500 hover:text-blue-500 transition-colors\",children:[/*#__PURE__*/_jsx(Share2,{className:\"w-5 h-5\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm\",children:post.shares_count||0})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-1 text-gray-500\",children:[/*#__PURE__*/_jsx(Eye,{className:\"w-5 h-5\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm\",children:post.views_count})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleBookmark,className:\"p-2 rounded-full transition-colors \".concat(post.is_bookmarked?'text-yellow-500':'text-gray-400 hover:text-yellow-500'),children:/*#__PURE__*/_jsx(Bookmark,{className:\"w-5 h-5 \".concat(post.is_bookmarked?'fill-current':'')})})]})]});};export default PostCard;","map":{"version":3,"names":["React","Link","Heart","MessageCircle","Share2","Bookmark","MoreHorizontal","Clock","Users","Eye","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","PostCard","_ref","post","onLike","onBookmark","formatTime","dateString","date","Date","now","diff","getTime","hours","Math","floor","minutes","concat","days","handleLike","id","handleBookmark","className","children","src","author","avatar_url","alt","nickname","is_verified","circle","to","name","created_at","title","content","tags","length","map","tag","onClick","is_liked","likes_count","comments_count","shares_count","views_count","is_bookmarked"],"sources":["D:/miko/frontend/src/components/Post/PostCard.tsx"],"sourcesContent":["import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { Heart, MessageCircle, Share2, Bookmark, MoreHorizontal, Clock, Users, Eye } from 'lucide-react';\nimport { Post } from '../../types/post';\n\ninterface PostCardProps {\n  post: Post;\n  onLike?: (postId: number) => void;\n  onBookmark?: (postId: number) => void;\n}\n\nconst PostCard: React.FC<PostCardProps> = ({ post, onLike, onBookmark }) => {\n  const formatTime = (dateString: string) => {\n    const date = new Date(dateString);\n    const now = new Date();\n    const diff = now.getTime() - date.getTime();\n    const hours = Math.floor(diff / (1000 * 60 * 60));\n    \n    if (hours < 1) {\n      const minutes = Math.floor(diff / (1000 * 60));\n      return `${minutes}分钟前`;\n    } else if (hours < 24) {\n      return `${hours}小时前`;\n    } else {\n      const days = Math.floor(hours / 24);\n      return `${days}天前`;\n    }\n  };\n\n  const handleLike = () => {\n    onLike?.(post.id);\n  };\n\n  const handleBookmark = () => {\n    onBookmark?.(post.id);\n  };\n\n  return (\n    <div className=\"bg-white rounded-lg shadow-sm border border-gray-200\">\n      {/* 帖子头部 */}\n      <div className=\"flex items-center justify-between p-4 border-b border-gray-100\">\n        <div className=\"flex items-center space-x-3\">\n          <img\n            src={post.author.avatar_url}\n            alt={post.author.nickname}\n            className=\"w-10 h-10 rounded-full\"\n          />\n          <div>\n            <div className=\"flex items-center space-x-2\">\n              <h3 className=\"font-medium text-gray-900\">{post.author.nickname}</h3>\n              {post.author.is_verified && (\n                <span className=\"text-blue-500 text-xs\">✓</span>\n              )}\n              {post.circle && (\n                <>\n                  <span className=\"text-gray-400\">·</span>\n                  <Link\n                    to={`/circles/${post.circle.id}`}\n                    className=\"text-sm text-primary-600 hover:text-primary-700 flex items-center\"\n                  >\n                    <Users className=\"w-3 h-3 mr-1\" />\n                    {post.circle.name}\n                  </Link>\n                </>\n              )}\n            </div>\n            <div className=\"flex items-center text-sm text-gray-500\">\n              <Clock className=\"w-3 h-3 mr-1\" />\n              {formatTime(post.created_at)}\n            </div>\n          </div>\n        </div>\n        <button className=\"p-2 hover:bg-gray-100 rounded-full\">\n          <MoreHorizontal className=\"w-4 h-4 text-gray-400\" />\n        </button>\n      </div>\n\n      {/* 帖子内容 */}\n      <div className=\"p-4\">\n        <Link to={`/posts/${post.id}`} className=\"block\">\n          <h2 className=\"text-lg font-medium text-gray-900 mb-2 hover:text-primary-600\">\n            {post.title}\n          </h2>\n          <p className=\"text-gray-700 leading-relaxed mb-4 line-clamp-3\">\n            {post.content}\n          </p>\n        </Link>\n\n        {/* 标签 */}\n        {post.tags.length > 0 && (\n          <div className=\"flex flex-wrap gap-2 mb-4\">\n            {post.tags.map((tag) => (\n              <span\n                key={tag}\n                className=\"inline-block px-2 py-1 text-xs bg-gray-100 text-gray-600 rounded-full\"\n              >\n                #{tag}\n              </span>\n            ))}\n          </div>\n        )}\n      </div>\n\n      {/* 互动按钮 */}\n      <div className=\"flex items-center justify-between px-4 py-3 border-t border-gray-100\">\n        <div className=\"flex items-center space-x-6\">\n          <button\n            onClick={handleLike}\n            className={`flex items-center space-x-1 transition-colors ${\n              post.is_liked ? 'text-red-500' : 'text-gray-500 hover:text-red-500'\n            }`}\n          >\n            <Heart className={`w-5 h-5 ${post.is_liked ? 'fill-current' : ''}`} />\n            <span className=\"text-sm\">{post.likes_count}</span>\n          </button>\n          <Link\n            to={`/posts/${post.id}`}\n            className=\"flex items-center space-x-1 text-gray-500 hover:text-primary-600 transition-colors\"\n          >\n            <MessageCircle className=\"w-5 h-5\" />\n            <span className=\"text-sm\">{post.comments_count || 0}</span>\n          </Link>\n          <button className=\"flex items-center space-x-1 text-gray-500 hover:text-blue-500 transition-colors\">\n            <Share2 className=\"w-5 h-5\" />\n            <span className=\"text-sm\">{post.shares_count || 0}</span>\n          </button>\n          <div className=\"flex items-center space-x-1 text-gray-500\">\n            <Eye className=\"w-5 h-5\" />\n            <span className=\"text-sm\">{post.views_count}</span>\n          </div>\n        </div>\n        <button\n          onClick={handleBookmark}\n          className={`p-2 rounded-full transition-colors ${\n            post.is_bookmarked ? 'text-yellow-500' : 'text-gray-400 hover:text-yellow-500'\n          }`}\n        >\n          <Bookmark className={`w-5 h-5 ${post.is_bookmarked ? 'fill-current' : ''}`} />\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default PostCard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}