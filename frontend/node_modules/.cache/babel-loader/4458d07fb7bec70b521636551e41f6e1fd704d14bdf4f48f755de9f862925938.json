{"ast":null,"code":"import apiClient from './client';\nexport const postsApi = {\n  // 获取帖子列表\n  getPosts: async (filters = {}) => {\n    var _filters$tags;\n    const params = new URLSearchParams();\n    if (filters.post_type) params.append('post_type', filters.post_type);\n    if (filters.author_id) params.append('author_id', filters.author_id.toString());\n    if ((_filters$tags = filters.tags) !== null && _filters$tags !== void 0 && _filters$tags.length) params.append('tags', filters.tags.join(','));\n    if (filters.search) params.append('search', filters.search);\n    if (filters.ordering) params.append('ordering', filters.ordering);\n    const response = await apiClient.get(`/posts/posts/?${params.toString()}`);\n    return response.data;\n  },\n  // 获取帖子详情\n  getPost: async postId => {\n    const response = await apiClient.get(`/posts/${postId}/`);\n    return response.data;\n  },\n  // 创建帖子\n  createPost: async data => {\n    const formData = new FormData();\n    formData.append('title', data.title);\n    formData.append('content', data.content);\n    formData.append('post_type', data.post_type);\n    formData.append('tags', JSON.stringify(data.tags));\n    data.images.forEach((image, index) => {\n      formData.append(`images`, image);\n    });\n    const response = await apiClient.post('/posts/', formData, {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      }\n    });\n    return response.data;\n  },\n  // 更新帖子\n  updatePost: async (postId, data) => {\n    const response = await apiClient.patch(`/posts/${postId}/`, data);\n    return response.data;\n  },\n  // 删除帖子\n  deletePost: async postId => {\n    await apiClient.delete(`/posts/${postId}/`);\n  },\n  // 点赞帖子\n  likePost: async postId => {\n    await apiClient.post(`/posts/${postId}/like/`);\n  },\n  // 取消点赞帖子\n  unlikePost: async postId => {\n    await apiClient.delete(`/posts/${postId}/like/`);\n  },\n  // 收藏帖子\n  bookmarkPost: async postId => {\n    await apiClient.post(`/posts/${postId}/bookmark/`);\n  },\n  // 取消收藏帖子\n  unbookmarkPost: async postId => {\n    await apiClient.delete(`/posts/${postId}/bookmark/`);\n  },\n  // 分享帖子\n  sharePost: async (postId, platform) => {\n    await apiClient.post(`/posts/${postId}/share/`, {\n      platform\n    });\n  },\n  // 举报帖子\n  reportPost: async (postId, reportType, reason) => {\n    await apiClient.post(`/posts/${postId}/report/`, {\n      report_type: reportType,\n      reason\n    });\n  },\n  // 获取热门帖子\n  getTrendingPosts: async () => {\n    const response = await apiClient.get('/posts/trending/');\n    return response.data;\n  },\n  // 获取推荐帖子\n  getRecommendedPosts: async () => {\n    const response = await apiClient.get('/posts/recommended/');\n    return response.data;\n  }\n};","map":{"version":3,"names":["apiClient","postsApi","getPosts","filters","_filters$tags","params","URLSearchParams","post_type","append","author_id","toString","tags","length","join","search","ordering","response","get","data","getPost","postId","createPost","formData","FormData","title","content","JSON","stringify","images","forEach","image","index","post","headers","updatePost","patch","deletePost","delete","likePost","unlikePost","bookmarkPost","unbookmarkPost","sharePost","platform","reportPost","reportType","reason","report_type","getTrendingPosts","getRecommendedPosts"],"sources":["D:/miko/frontend/src/api/posts.ts"],"sourcesContent":["import apiClient from './client';\r\nimport { Post, CreatePostRequest, PostFilters } from '../types/post';\r\n\r\nexport const postsApi = {\r\n  // 获取帖子列表\r\n  getPosts: async (filters: PostFilters = {}): Promise<{ results: Post[]; count: number; next: string | null }> => {\r\n    const params = new URLSearchParams();\r\n    \r\n    if (filters.post_type) params.append('post_type', filters.post_type);\r\n    if (filters.author_id) params.append('author_id', filters.author_id.toString());\r\n    if (filters.tags?.length) params.append('tags', filters.tags.join(','));\r\n    if (filters.search) params.append('search', filters.search);\r\n    if (filters.ordering) params.append('ordering', filters.ordering);\r\n    \r\n    const response = await apiClient.get(`/posts/posts/?${params.toString()}`);\r\n    return response.data;\r\n  },\r\n\r\n  // 获取帖子详情\r\n  getPost: async (postId: number): Promise<Post> => {\r\n    const response = await apiClient.get(`/posts/${postId}/`);\r\n    return response.data;\r\n  },\r\n\r\n  // 创建帖子\r\n  createPost: async (data: CreatePostRequest): Promise<Post> => {\r\n    const formData = new FormData();\r\n    formData.append('title', data.title);\r\n    formData.append('content', data.content);\r\n    formData.append('post_type', data.post_type);\r\n    formData.append('tags', JSON.stringify(data.tags));\r\n    \r\n    data.images.forEach((image, index) => {\r\n      formData.append(`images`, image);\r\n    });\r\n    \r\n    const response = await apiClient.post('/posts/', formData, {\r\n      headers: {\r\n        'Content-Type': 'multipart/form-data',\r\n      },\r\n    });\r\n    return response.data;\r\n  },\r\n\r\n  // 更新帖子\r\n  updatePost: async (postId: number, data: Partial<CreatePostRequest>): Promise<Post> => {\r\n    const response = await apiClient.patch(`/posts/${postId}/`, data);\r\n    return response.data;\r\n  },\r\n\r\n  // 删除帖子\r\n  deletePost: async (postId: number): Promise<void> => {\r\n    await apiClient.delete(`/posts/${postId}/`);\r\n  },\r\n\r\n  // 点赞帖子\r\n  likePost: async (postId: number): Promise<void> => {\r\n    await apiClient.post(`/posts/${postId}/like/`);\r\n  },\r\n\r\n  // 取消点赞帖子\r\n  unlikePost: async (postId: number): Promise<void> => {\r\n    await apiClient.delete(`/posts/${postId}/like/`);\r\n  },\r\n\r\n  // 收藏帖子\r\n  bookmarkPost: async (postId: number): Promise<void> => {\r\n    await apiClient.post(`/posts/${postId}/bookmark/`);\r\n  },\r\n\r\n  // 取消收藏帖子\r\n  unbookmarkPost: async (postId: number): Promise<void> => {\r\n    await apiClient.delete(`/posts/${postId}/bookmark/`);\r\n  },\r\n\r\n  // 分享帖子\r\n  sharePost: async (postId: number, platform: string): Promise<void> => {\r\n    await apiClient.post(`/posts/${postId}/share/`, { platform });\r\n  },\r\n\r\n  // 举报帖子\r\n  reportPost: async (postId: number, reportType: string, reason: string): Promise<void> => {\r\n    await apiClient.post(`/posts/${postId}/report/`, {\r\n      report_type: reportType,\r\n      reason,\r\n    });\r\n  },\r\n\r\n  // 获取热门帖子\r\n  getTrendingPosts: async (): Promise<Post[]> => {\r\n    const response = await apiClient.get('/posts/trending/');\r\n    return response.data;\r\n  },\r\n\r\n  // 获取推荐帖子\r\n  getRecommendedPosts: async (): Promise<Post[]> => {\r\n    const response = await apiClient.get('/posts/recommended/');\r\n    return response.data;\r\n  },\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}