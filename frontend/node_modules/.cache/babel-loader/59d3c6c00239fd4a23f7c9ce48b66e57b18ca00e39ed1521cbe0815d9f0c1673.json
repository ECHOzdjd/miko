{"ast":null,"code":"import _objectSpread from\"D:/miko/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useRef,useEffect}from'react';import{useParams,Link}from'react-router-dom';import{Camera,Edit3,Save,X,Heart,MessageSquare,Users,FileText,Calendar,MapPin,Eye,EyeOff,UserPlus,UserMinus,Trash2,Flag}from'lucide-react';import{useAuthStore}from'../stores/authStore';import{useForm}from'react-hook-form';import{useQuery,useMutation,useQueryClient}from'react-query';import{authApi}from'../api/auth';import{postsApi}from'../api/posts';import toast from'react-hot-toast';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Profile=()=>{var _watch;const{userId}=useParams();const{user,updateUser}=useAuthStore();const queryClient=useQueryClient();const fileInputRef=useRef(null);const[isEditing,setIsEditing]=useState(false);const[activeTab,setActiveTab]=useState('posts');const[avatarPreview,setAvatarPreview]=useState(null);const[showPrivateInfo,setShowPrivateInfo]=useState(false);const[deleteConfirm,setDeleteConfirm]=useState({show:false,postId:null,postTitle:''});const targetUserId=userId?parseInt(userId):user===null||user===void 0?void 0:user.id;const isOwnProfile=!userId||parseInt(userId)===(user===null||user===void 0?void 0:user.id);// 获取用户信息\nconst{data:profileUser,isLoading:userLoading}=useQuery({queryKey:['user',targetUserId],queryFn:()=>targetUserId?authApi.getUser(targetUserId):Promise.resolve(user),enabled:!!targetUserId});// 获取用户帖子\nconst{data:userPosts,isLoading:postsLoading}=useQuery({queryKey:['userPosts',targetUserId],queryFn:()=>targetUserId?authApi.getUserPosts(targetUserId):{results:[],count:0,next:null},enabled:!!targetUserId&&activeTab==='posts'});// 获取用户点赞的帖子\nconst{data:likedPosts,isLoading:likesLoading}=useQuery({queryKey:['userLikedPosts',targetUserId],queryFn:()=>targetUserId?authApi.getUserLikedPosts(targetUserId):{results:[],count:0,next:null},enabled:!!targetUserId&&activeTab==='likes'});// 获取关注列表\nconst{data:followingData,isLoading:followingLoading}=useQuery({queryKey:['userFollowing',targetUserId],queryFn:()=>targetUserId?authApi.getUserFollowing(targetUserId):{results:[],count:0},enabled:!!targetUserId&&activeTab==='following'});// 获取粉丝列表\nconst{data:followersData,isLoading:followersLoading}=useQuery({queryKey:['userFollowers',targetUserId],queryFn:()=>targetUserId?authApi.getUserFollowers(targetUserId):{results:[],count:0},enabled:!!targetUserId&&activeTab==='followers'});// 更新用户信息\nconst updateUserMutation=useMutation({mutationFn:authApi.updateUser,onSuccess:updatedUser=>{updateUser(updatedUser);queryClient.invalidateQueries(['user',targetUserId]);toast.success('资料更新成功！');setIsEditing(false);},onError:()=>{toast.error('更新失败，请稍后重试');}});// 上传头像\nconst uploadAvatarMutation=useMutation({mutationFn:authApi.uploadAvatar,onSuccess:updatedUser=>{console.log('头像上传成功，返回的用户信息:',updatedUser);console.log('新的头像URL:',updatedUser.avatar_url);updateUser(updatedUser);queryClient.invalidateQueries(['user',targetUserId]);// 立即清除预览，因为后端已经返回了新的头像URL\nsetAvatarPreview(null);toast.success('头像更新成功！');},onError:error=>{console.error('头像上传失败:',error);toast.error('头像上传失败，请稍后重试');setAvatarPreview(null);}});// 关注/取消关注\nconst followMutation=useMutation({mutationFn:userId=>profileUser!==null&&profileUser!==void 0&&profileUser.is_following?authApi.unfollowUser(userId):authApi.followUser(userId),onSuccess:()=>{queryClient.invalidateQueries(['user',targetUserId]);queryClient.invalidateQueries(['userFollowers',targetUserId]);toast.success(profileUser!==null&&profileUser!==void 0&&profileUser.is_following?'已取消关注':'关注成功');},onError:()=>{toast.error('操作失败，请稍后重试');}});// 删除帖子\nconst deletePostMutation=useMutation({mutationFn:postId=>postsApi.deletePost(postId),onSuccess:()=>{queryClient.invalidateQueries(['userPosts',targetUserId]);queryClient.invalidateQueries(['user',targetUserId]);setDeleteConfirm({show:false,postId:null,postTitle:''});toast.success('帖子删除成功');},onError:()=>{toast.error('删除失败，请稍后重试');}});const{register,handleSubmit,reset,watch,formState:{errors}}=useForm({defaultValues:{nickname:(profileUser===null||profileUser===void 0?void 0:profileUser.nickname)||'',signature:(profileUser===null||profileUser===void 0?void 0:profileUser.signature)||'',bio:(profileUser===null||profileUser===void 0?void 0:profileUser.bio)||'',birthday:(profileUser===null||profileUser===void 0?void 0:profileUser.birthday)||'',gender:(profileUser===null||profileUser===void 0?void 0:profileUser.gender)||'',location:(profileUser===null||profileUser===void 0?void 0:profileUser.location)||''}});// 当用户数据加载完成时重置表单\nuseEffect(()=>{if(profileUser){reset({nickname:profileUser.nickname||'',signature:profileUser.signature||'',bio:profileUser.bio||'',birthday:profileUser.birthday||'',gender:profileUser.gender||'',location:profileUser.location||''});}},[profileUser,reset]);const handleAvatarChange=event=>{var _event$target$files;const file=(_event$target$files=event.target.files)===null||_event$target$files===void 0?void 0:_event$target$files[0];if(file){if(file.size>5*1024*1024){toast.error('头像文件不能超过5MB');return;}const reader=new FileReader();reader.onload=e=>{var _e$target;setAvatarPreview((_e$target=e.target)===null||_e$target===void 0?void 0:_e$target.result);};reader.readAsDataURL(file);// 立即上传头像\nuploadAvatarMutation.mutate(file);}};const onSubmit=async data=>{updateUserMutation.mutate(data);};const handleFollow=()=>{if(targetUserId){followMutation.mutate(targetUserId);}};const handleDeletePost=(postId,postTitle)=>{setDeleteConfirm({show:true,postId,postTitle});};const confirmDeletePost=()=>{if(deleteConfirm.postId){deletePostMutation.mutate(deleteConfirm.postId);}};const cancelDeletePost=()=>{setDeleteConfirm({show:false,postId:null,postTitle:''});};const formatDate=dateString=>{return new Date(dateString).toLocaleDateString('zh-CN',{year:'numeric',month:'long',day:'numeric'});};const getGenderText=gender=>{switch(gender){case'male':return'男';case'female':return'女';case'other':return'其他';default:return'未设置';}};const getAge=birthday=>{if(!birthday)return null;const today=new Date();const birthDate=new Date(birthday);let age=today.getFullYear()-birthDate.getFullYear();const monthDiff=today.getMonth()-birthDate.getMonth();if(monthDiff<0||monthDiff===0&&today.getDate()<birthDate.getDate()){age--;}return age;};const renderTabContent=()=>{var _userPosts$results,_likedPosts$results,_followingData$result,_followersData$result;switch(activeTab){case'posts':if(postsLoading){return/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8 text-gray-500\",children:\"\\u52A0\\u8F7D\\u4E2D...\"});}if(!(userPosts!==null&&userPosts!==void 0&&(_userPosts$results=userPosts.results)!==null&&_userPosts$results!==void 0&&_userPosts$results.length)){return/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8 text-gray-500\",children:\"\\u6682\\u65E0\\u5E16\\u5B50\"});}return/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:userPosts.results.map(post=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg border border-gray-200 p-4 hover:shadow-md transition-shadow cursor-pointer group\",children:[/*#__PURE__*/_jsxs(Link,{to:\"/post/\".concat(post.id),className:\"block\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-medium text-gray-900 group-hover:text-primary-600 mb-2 transition-colors\",children:post.title}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-sm mb-3 line-clamp-2\",children:post.content}),post.images&&post.images.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-3 gap-2\",children:post.images.slice(0,3).map((imageUrl,index)=>/*#__PURE__*/_jsx(\"img\",{src:imageUrl,alt:\"\\u56FE\\u7247 \".concat(index+1),className:\"w-full h-20 object-cover rounded\"},index))}),post.images.length>3&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:[\"\\u8FD8\\u6709 \",post.images.length-3,\" \\u5F20\\u56FE\\u7247...\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between text-sm text-gray-500\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(Heart,{className:\"w-4 h-4 mr-1\"}),post.likes_count||0]}),/*#__PURE__*/_jsxs(\"span\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(MessageSquare,{className:\"w-4 h-4 mr-1\"}),post.comments_count||0]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"span\",{children:new Date(post.created_at).toLocaleDateString()}),isOwnProfile&&/*#__PURE__*/_jsx(\"button\",{onClick:e=>{e.preventDefault();e.stopPropagation();handleDeletePost(post.id,post.title);},className:\"text-red-500 hover:text-red-700 p-1 rounded transition-colors\",title:\"\\u5220\\u9664\\u5E16\\u5B50\",children:/*#__PURE__*/_jsx(Trash2,{className:\"w-4 h-4\"})})]})]})]},post.id))});case'likes':if(likesLoading){return/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8 text-gray-500\",children:\"\\u52A0\\u8F7D\\u4E2D...\"});}if(!(likedPosts!==null&&likedPosts!==void 0&&(_likedPosts$results=likedPosts.results)!==null&&_likedPosts$results!==void 0&&_likedPosts$results.length)){return/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8 text-gray-500\",children:\"\\u6682\\u65E0\\u70B9\\u8D5E\\u7684\\u5E16\\u5B50\"});}return/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:likedPosts.results.map(post=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg border border-gray-200 p-4 hover:shadow-md transition-shadow cursor-pointer group\",children:[/*#__PURE__*/_jsxs(Link,{to:\"/post/\".concat(post.id),className:\"block\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-medium text-gray-900 group-hover:text-primary-600 mb-2 transition-colors\",children:post.title}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-sm mb-3 line-clamp-2\",children:post.content}),post.images&&post.images.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-3 gap-2\",children:post.images.slice(0,3).map((imageUrl,index)=>/*#__PURE__*/_jsx(\"img\",{src:imageUrl,alt:\"\\u56FE\\u7247 \".concat(index+1),className:\"w-full h-20 object-cover rounded\"},index))}),post.images.length>3&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:[\"\\u8FD8\\u6709 \",post.images.length-3,\" \\u5F20\\u56FE\\u7247...\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between text-sm text-gray-500\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"flex items-center text-red-500\",children:[/*#__PURE__*/_jsx(Heart,{className:\"w-4 h-4 mr-1 fill-current\"}),\"\\u5DF2\\u70B9\\u8D5E\"]}),/*#__PURE__*/_jsxs(\"span\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(MessageSquare,{className:\"w-4 h-4 mr-1\"}),post.comments_count||0]})]}),/*#__PURE__*/_jsx(\"span\",{children:new Date(post.created_at).toLocaleDateString()})]})]},post.id))});case'following':if(followingLoading){return/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8 text-gray-500\",children:\"\\u52A0\\u8F7D\\u4E2D...\"});}if(!(followingData!==null&&followingData!==void 0&&(_followingData$result=followingData.results)!==null&&_followingData$result!==void 0&&_followingData$result.length)){return/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8 text-gray-500\",children:\"\\u6682\\u65E0\\u5173\\u6CE8\\u7684\\u7528\\u6237\"});}return/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:followingData.results.map(followUser=>/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg border border-gray-200 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"img\",{src:followUser.avatar_url,alt:followUser.nickname,className:\"w-12 h-12 rounded-full\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(Link,{to:\"/profile/\".concat(followUser.id),className:\"font-medium text-gray-900 hover:text-primary-600\",children:followUser.nickname}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mt-1\",children:followUser.signature}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:[followUser.followers_count,\" \\u7C89\\u4E1D\"]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"px-3 py-1 text-sm bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200\",children:\"\\u5DF2\\u5173\\u6CE8\"})]})},followUser.id))});case'followers':if(followersLoading){return/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8 text-gray-500\",children:\"\\u52A0\\u8F7D\\u4E2D...\"});}if(!(followersData!==null&&followersData!==void 0&&(_followersData$result=followersData.results)!==null&&_followersData$result!==void 0&&_followersData$result.length)){return/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8 text-gray-500\",children:\"\\u6682\\u65E0\\u7C89\\u4E1D\"});}return/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:followersData.results.map(follower=>/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg border border-gray-200 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"img\",{src:follower.avatar_url,alt:follower.nickname,className:\"w-12 h-12 rounded-full\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(Link,{to:\"/profile/\".concat(follower.id),className:\"font-medium text-gray-900 hover:text-primary-600\",children:follower.nickname}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mt-1\",children:follower.signature}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:[follower.followers_count,\" \\u7C89\\u4E1D\"]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"px-3 py-1 text-sm bg-primary-600 text-white rounded-md hover:bg-primary-700\",children:\"\\u5173\\u6CE8\"})]})},follower.id))});default:return null;}};if(userLoading){return/*#__PURE__*/_jsx(\"div\",{className:\"max-w-4xl mx-auto py-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"animate-pulse\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"h-32 bg-gray-300 rounded-t-lg mb-4\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-32 h-32 bg-gray-300 rounded-full\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"h-6 bg-gray-300 rounded w-1/3 mb-2\"}),/*#__PURE__*/_jsx(\"div\",{className:\"h-4 bg-gray-300 rounded w-1/2\"})]})]})]})})});}if(!profileUser){return/*#__PURE__*/_jsx(\"div\",{className:\"max-w-4xl mx-auto py-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-sm border border-gray-200 p-6 text-center\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"\\u7528\\u6237\\u4E0D\\u5B58\\u5728\"})})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-4xl mx-auto py-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border border-gray-200 mb-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"h-48 bg-gradient-to-r from-primary-400 to-primary-600 rounded-t-lg relative\",style:{backgroundImage:profileUser.background_url?\"url(\".concat(profileUser.background_url,\")\"):undefined,backgroundSize:'cover',backgroundPosition:'center'}}),/*#__PURE__*/_jsxs(\"div\",{className:\"px-6 pb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col sm:flex-row sm:items-end sm:space-x-6 -mt-16 relative\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"img\",{src:avatarPreview||(profileUser===null||profileUser===void 0?void 0:profileUser.avatar_url)||'/default-avatar.svg',alt:(profileUser===null||profileUser===void 0?void 0:profileUser.nickname)||'用户',className:\"w-32 h-32 rounded-full border-4 border-white shadow-lg\",onError:e=>{// 如果头像加载失败，使用默认头像\ne.currentTarget.src='/default-avatar.svg';}}),isOwnProfile&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>{var _fileInputRef$current;return(_fileInputRef$current=fileInputRef.current)===null||_fileInputRef$current===void 0?void 0:_fileInputRef$current.click();},disabled:uploadAvatarMutation.isLoading,className:\"absolute bottom-2 right-2 p-2 bg-primary-600 text-white rounded-full hover:bg-primary-700 disabled:opacity-50\",children:/*#__PURE__*/_jsx(Camera,{className:\"w-4 h-4\"})}),/*#__PURE__*/_jsx(\"input\",{ref:fileInputRef,type:\"file\",accept:\"image/*\",onChange:handleAvatarChange,className:\"hidden\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 mt-4 sm:mt-0\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col sm:flex-row sm:items-center sm:justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-900\",children:profileUser.nickname}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mt-1\",children:profileUser.signature}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 mt-2\",children:profileUser.bio}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 space-y-1\",children:[profileUser.birthday&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-sm text-gray-600\",children:[/*#__PURE__*/_jsx(Calendar,{className:\"w-4 h-4 mr-2\"}),formatDate(profileUser.birthday),getAge(profileUser.birthday)&&/*#__PURE__*/_jsxs(\"span\",{className:\"ml-2 text-gray-500\",children:[\"(\",getAge(profileUser.birthday),\"\\u5C81)\"]})]}),profileUser.gender&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-sm text-gray-600\",children:[/*#__PURE__*/_jsx(Users,{className:\"w-4 h-4 mr-2\"}),getGenderText(profileUser.gender)]}),profileUser.location&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-sm text-gray-600\",children:[/*#__PURE__*/_jsx(MapPin,{className:\"w-4 h-4 mr-2\"}),profileUser.location]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-sm text-gray-600\",children:[/*#__PURE__*/_jsx(Calendar,{className:\"w-4 h-4 mr-2\"}),\"\\u52A0\\u5165\\u4E8E \",formatDate(profileUser.created_at)]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center space-x-3 mt-4 sm:mt-0\",children:isOwnProfile?/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setIsEditing(!isEditing),className:\"flex items-center px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200\",children:[isEditing?/*#__PURE__*/_jsx(X,{className:\"w-4 h-4 mr-2\"}):/*#__PURE__*/_jsx(Edit3,{className:\"w-4 h-4 mr-2\"}),isEditing?'取消':'编辑资料']}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleFollow,disabled:followMutation.isLoading,className:\"flex items-center px-4 py-2 rounded-md disabled:opacity-50 \".concat(profileUser.is_following?'bg-gray-100 text-gray-700 hover:bg-gray-200':'bg-primary-600 text-white hover:bg-primary-700'),children:followMutation.isLoading?'处理中...':/*#__PURE__*/_jsxs(_Fragment,{children:[profileUser.is_following?/*#__PURE__*/_jsx(UserMinus,{className:\"w-4 h-4 mr-2\"}):/*#__PURE__*/_jsx(UserPlus,{className:\"w-4 h-4 mr-2\"}),profileUser.is_following?'已关注':'关注']})}),/*#__PURE__*/_jsxs(Link,{to:\"/chat/\".concat(profileUser.id),className:\"flex items-center px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200\",children:[/*#__PURE__*/_jsx(MessageSquare,{className:\"w-4 h-4 mr-2\"}),\"\\u79C1\\u4FE1\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"flex items-center px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200\",children:[/*#__PURE__*/_jsx(Flag,{className:\"w-4 h-4 mr-2\"}),\"\\u4E3E\\u62A5\"]})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-6 mt-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xl font-bold text-gray-900\",children:profileUser.posts_count||0}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500\",children:\"\\u5E16\\u5B50\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xl font-bold text-gray-900\",children:profileUser.followers_count||0}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500\",children:\"\\u7C89\\u4E1D\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xl font-bold text-gray-900\",children:profileUser.following_count||0}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500\",children:\"\\u5173\\u6CE8\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xl font-bold text-gray-900\",children:profileUser.likes_received||0}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500\",children:\"\\u83B7\\u8D5E\"})]})]})]})]}),isEditing&&isOwnProfile&&/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),className:\"mt-6 p-6 bg-gray-50 rounded-lg\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"\\u7F16\\u8F91\\u4E2A\\u4EBA\\u8D44\\u6599\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"\\u6635\\u79F0 *\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({},register('nickname',{required:'请输入昵称'})),{},{className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500\",placeholder:\"\\u8BF7\\u8F93\\u5165\\u6635\\u79F0\"})),errors.nickname&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.nickname.message})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"\\u6027\\u522B\"}),/*#__PURE__*/_jsxs(\"select\",_objectSpread(_objectSpread({},register('gender')),{},{className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u8BF7\\u9009\\u62E9\\u6027\\u522B\"}),/*#__PURE__*/_jsx(\"option\",{value:\"male\",children:\"\\u7537\"}),/*#__PURE__*/_jsx(\"option\",{value:\"female\",children:\"\\u5973\"}),/*#__PURE__*/_jsx(\"option\",{value:\"other\",children:\"\\u5176\\u4ED6\"})]}))]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"\\u751F\\u65E5\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({},register('birthday')),{},{type:\"date\",className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500\"}))]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"\\u6240\\u5728\\u5730\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({},register('location')),{},{className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500\",placeholder:\"\\u8BF7\\u8F93\\u5165\\u6240\\u5728\\u5730\"}))]}),/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"\\u4E2A\\u6027\\u7B7E\\u540D\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({},register('signature')),{},{className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500\",placeholder:\"\\u5199\\u70B9\\u4EC0\\u4E48\\u4ECB\\u7ECD\\u4E00\\u4E0B\\u81EA\\u5DF1...\",maxLength:200}))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"\\u4E2A\\u4EBA\\u7B80\\u4ECB\"}),/*#__PURE__*/_jsx(\"textarea\",_objectSpread(_objectSpread({},register('bio')),{},{rows:4,className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500\",placeholder:\"\\u8BE6\\u7EC6\\u4ECB\\u7ECD\\u4E00\\u4E0B\\u81EA\\u5DF1...\",maxLength:500})),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-1 text-right text-sm text-gray-500\",children:[((_watch=watch('bio'))===null||_watch===void 0?void 0:_watch.length)||0,\" / 500\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mt-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",disabled:updateUserMutation.isLoading,className:\"flex items-center px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 disabled:opacity-50\",children:[/*#__PURE__*/_jsx(Save,{className:\"w-4 h-4 mr-2\"}),updateUserMutation.isLoading?'保存中...':'保存']}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setIsEditing(false);reset();},className:\"px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200\",children:\"\\u53D6\\u6D88\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center space-x-2 text-sm text-gray-500\",children:/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:()=>setShowPrivateInfo(!showPrivateInfo),className:\"flex items-center hover:text-gray-700\",children:[showPrivateInfo?/*#__PURE__*/_jsx(EyeOff,{className:\"w-4 h-4 mr-1\"}):/*#__PURE__*/_jsx(Eye,{className:\"w-4 h-4 mr-1\"}),showPrivateInfo?'隐藏':'显示',\"\\u9690\\u79C1\\u4FE1\\u606F\"]})})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border border-gray-200\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"border-b border-gray-200\",children:/*#__PURE__*/_jsxs(\"nav\",{className:\"flex space-x-8 px-6\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveTab('posts'),className:\"py-4 px-1 border-b-2 font-medium text-sm \".concat(activeTab==='posts'?'border-primary-500 text-primary-600':'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'),children:[/*#__PURE__*/_jsx(FileText,{className:\"w-4 h-4 inline mr-2\"}),\"\\u6211\\u7684\\u5E16\\u5B50 (\",profileUser.posts_count||0,\")\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveTab('likes'),className:\"py-4 px-1 border-b-2 font-medium text-sm \".concat(activeTab==='likes'?'border-primary-500 text-primary-600':'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'),children:[/*#__PURE__*/_jsx(Heart,{className:\"w-4 h-4 inline mr-2\"}),\"\\u6211\\u7684\\u70B9\\u8D5E\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveTab('following'),className:\"py-4 px-1 border-b-2 font-medium text-sm \".concat(activeTab==='following'?'border-primary-500 text-primary-600':'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'),children:[/*#__PURE__*/_jsx(Users,{className:\"w-4 h-4 inline mr-2\"}),\"\\u6211\\u7684\\u5173\\u6CE8 (\",profileUser.following_count||0,\")\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveTab('followers'),className:\"py-4 px-1 border-b-2 font-medium text-sm \".concat(activeTab==='followers'?'border-primary-500 text-primary-600':'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'),children:[/*#__PURE__*/_jsx(Users,{className:\"w-4 h-4 inline mr-2\"}),\"\\u6211\\u7684\\u7C89\\u4E1D (\",profileUser.followers_count||0,\")\"]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"p-6\",children:renderTabContent()})]}),deleteConfirm.show&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg p-6 max-w-md w-full mx-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center mb-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0 w-10 h-10 mx-auto bg-red-100 rounded-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(Trash2,{className:\"w-6 h-6 text-red-600\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-2\",children:\"\\u5220\\u9664\\u5E16\\u5B50\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-500 mb-4\",children:[\"\\u786E\\u5B9A\\u8981\\u5220\\u9664\\u5E16\\u5B50 \",/*#__PURE__*/_jsxs(\"strong\",{children:[\"\\\"\",deleteConfirm.postTitle,\"\\\"\"]}),\" \\u5417\\uFF1F\\u6B64\\u64CD\\u4F5C\\u65E0\\u6CD5\\u64A4\\u9500\\u3002\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:cancelDeletePost,className:\"flex-1 bg-gray-100 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-200 transition-colors\",children:\"\\u53D6\\u6D88\"}),/*#__PURE__*/_jsx(\"button\",{onClick:confirmDeletePost,disabled:deletePostMutation.isLoading,className:\"flex-1 bg-red-600 text-white px-4 py-2 rounded-md hover:bg-red-700 disabled:opacity-50 transition-colors\",children:deletePostMutation.isLoading?'删除中...':'删除'})]})]})]})})]});};export default Profile;","map":{"version":3,"names":["React","useState","useRef","useEffect","useParams","Link","Camera","Edit3","Save","X","Heart","MessageSquare","Users","FileText","Calendar","MapPin","Eye","EyeOff","UserPlus","UserMinus","Trash2","Flag","useAuthStore","useForm","useQuery","useMutation","useQueryClient","authApi","postsApi","toast","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Profile","_watch","userId","user","updateUser","queryClient","fileInputRef","isEditing","setIsEditing","activeTab","setActiveTab","avatarPreview","setAvatarPreview","showPrivateInfo","setShowPrivateInfo","deleteConfirm","setDeleteConfirm","show","postId","postTitle","targetUserId","parseInt","id","isOwnProfile","data","profileUser","isLoading","userLoading","queryKey","queryFn","getUser","Promise","resolve","enabled","userPosts","postsLoading","getUserPosts","results","count","next","likedPosts","likesLoading","getUserLikedPosts","followingData","followingLoading","getUserFollowing","followersData","followersLoading","getUserFollowers","updateUserMutation","mutationFn","onSuccess","updatedUser","invalidateQueries","success","onError","error","uploadAvatarMutation","uploadAvatar","console","log","avatar_url","followMutation","is_following","unfollowUser","followUser","deletePostMutation","deletePost","register","handleSubmit","reset","watch","formState","errors","defaultValues","nickname","signature","bio","birthday","gender","location","handleAvatarChange","event","_event$target$files","file","target","files","size","reader","FileReader","onload","e","_e$target","result","readAsDataURL","mutate","onSubmit","handleFollow","handleDeletePost","confirmDeletePost","cancelDeletePost","formatDate","dateString","Date","toLocaleDateString","year","month","day","getGenderText","getAge","today","birthDate","age","getFullYear","monthDiff","getMonth","getDate","renderTabContent","_userPosts$results","_likedPosts$results","_followingData$result","_followersData$result","className","children","length","map","post","to","concat","title","content","images","slice","imageUrl","index","src","alt","likes_count","comments_count","created_at","onClick","preventDefault","stopPropagation","followers_count","follower","style","backgroundImage","background_url","undefined","backgroundSize","backgroundPosition","currentTarget","_fileInputRef$current","current","click","disabled","ref","type","accept","onChange","posts_count","following_count","likes_received","_objectSpread","required","placeholder","message","value","maxLength","rows"],"sources":["D:/miko/frontend/src/pages/Profile.tsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\r\nimport { useParams, Link } from 'react-router-dom';\r\nimport { \r\n  Camera, Edit3, Save, X, Heart, MessageSquare, Users, FileText, \r\n  Calendar, MapPin, Globe, Mail, Phone, Eye, EyeOff,\r\n  UserPlus, UserMinus, Trash2, Flag\r\n} from 'lucide-react';\r\nimport { useAuthStore } from '../stores/authStore';\r\nimport { useForm } from 'react-hook-form';\r\nimport { useQuery, useMutation, useQueryClient } from 'react-query';\r\nimport { authApi } from '../api/auth';\r\nimport { postsApi } from '../api/posts';\r\nimport toast from 'react-hot-toast';\r\n\r\ninterface ProfileForm {\r\n  nickname: string;\r\n  signature: string;\r\n  bio: string;\r\n  birthday: string;\r\n  gender: 'male' | 'female' | 'other' | '';\r\n  location: string;\r\n}\r\n\r\nconst Profile: React.FC = () => {\r\n  const { userId } = useParams<{ userId: string }>();\r\n  const { user, updateUser } = useAuthStore();\r\n  const queryClient = useQueryClient();\r\n  const fileInputRef = useRef<HTMLInputElement>(null);\r\n  \r\n  const [isEditing, setIsEditing] = useState(false);\r\n  const [activeTab, setActiveTab] = useState<'posts' | 'likes' | 'following' | 'followers'>('posts');\r\n  const [avatarPreview, setAvatarPreview] = useState<string | null>(null);\r\n  const [showPrivateInfo, setShowPrivateInfo] = useState(false);\r\n  const [deleteConfirm, setDeleteConfirm] = useState<{ show: boolean; postId: number | null; postTitle: string }>({\r\n    show: false,\r\n    postId: null,\r\n    postTitle: ''\r\n  });\r\n\r\n  const targetUserId = userId ? parseInt(userId) : user?.id;\r\n  const isOwnProfile = !userId || parseInt(userId) === user?.id;\r\n\r\n  // 获取用户信息\r\n  const { data: profileUser, isLoading: userLoading } = useQuery({\r\n    queryKey: ['user', targetUserId],\r\n    queryFn: () => targetUserId ? authApi.getUser(targetUserId) : Promise.resolve(user),\r\n    enabled: !!targetUserId,\r\n  });\r\n\r\n  // 获取用户帖子\r\n  const { data: userPosts, isLoading: postsLoading } = useQuery({\r\n    queryKey: ['userPosts', targetUserId],\r\n    queryFn: () => targetUserId ? authApi.getUserPosts(targetUserId) : { results: [], count: 0, next: null },\r\n    enabled: !!targetUserId && activeTab === 'posts',\r\n  });\r\n\r\n  // 获取用户点赞的帖子\r\n  const { data: likedPosts, isLoading: likesLoading } = useQuery({\r\n    queryKey: ['userLikedPosts', targetUserId],\r\n    queryFn: () => targetUserId ? authApi.getUserLikedPosts(targetUserId) : { results: [], count: 0, next: null },\r\n    enabled: !!targetUserId && activeTab === 'likes',\r\n  });\r\n\r\n  // 获取关注列表\r\n  const { data: followingData, isLoading: followingLoading } = useQuery({\r\n    queryKey: ['userFollowing', targetUserId],\r\n    queryFn: () => targetUserId ? authApi.getUserFollowing(targetUserId) : { results: [], count: 0 },\r\n    enabled: !!targetUserId && activeTab === 'following',\r\n  });\r\n\r\n  // 获取粉丝列表\r\n  const { data: followersData, isLoading: followersLoading } = useQuery({\r\n    queryKey: ['userFollowers', targetUserId],\r\n    queryFn: () => targetUserId ? authApi.getUserFollowers(targetUserId) : { results: [], count: 0 },\r\n    enabled: !!targetUserId && activeTab === 'followers',\r\n  });\r\n\r\n  // 更新用户信息\r\n  const updateUserMutation = useMutation({\r\n    mutationFn: authApi.updateUser,\r\n    onSuccess: (updatedUser) => {\r\n      updateUser(updatedUser);\r\n      queryClient.invalidateQueries(['user', targetUserId]);\r\n      toast.success('资料更新成功！');\r\n      setIsEditing(false);\r\n    },\r\n    onError: () => {\r\n      toast.error('更新失败，请稍后重试');\r\n    },\r\n  });\r\n\r\n  // 上传头像\r\n  const uploadAvatarMutation = useMutation({\r\n    mutationFn: authApi.uploadAvatar,\r\n    onSuccess: (updatedUser) => {\r\n      console.log('头像上传成功，返回的用户信息:', updatedUser);\r\n      console.log('新的头像URL:', updatedUser.avatar_url);\r\n      updateUser(updatedUser);\r\n      queryClient.invalidateQueries(['user', targetUserId]);\r\n      // 立即清除预览，因为后端已经返回了新的头像URL\r\n      setAvatarPreview(null);\r\n      toast.success('头像更新成功！');\r\n    },\r\n    onError: (error) => {\r\n      console.error('头像上传失败:', error);\r\n      toast.error('头像上传失败，请稍后重试');\r\n      setAvatarPreview(null);\r\n    },\r\n  });\r\n\r\n  // 关注/取消关注\r\n  const followMutation = useMutation({\r\n    mutationFn: (userId: number) => \r\n      profileUser?.is_following ? authApi.unfollowUser(userId) : authApi.followUser(userId),\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries(['user', targetUserId]);\r\n      queryClient.invalidateQueries(['userFollowers', targetUserId]);\r\n      toast.success(profileUser?.is_following ? '已取消关注' : '关注成功');\r\n    },\r\n    onError: () => {\r\n      toast.error('操作失败，请稍后重试');\r\n    },\r\n  });\r\n\r\n  // 删除帖子\r\n  const deletePostMutation = useMutation({\r\n    mutationFn: (postId: number) => postsApi.deletePost(postId),\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries(['userPosts', targetUserId]);\r\n      queryClient.invalidateQueries(['user', targetUserId]);\r\n      setDeleteConfirm({ show: false, postId: null, postTitle: '' });\r\n      toast.success('帖子删除成功');\r\n    },\r\n    onError: () => {\r\n      toast.error('删除失败，请稍后重试');\r\n    },\r\n  });\r\n\r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    reset,\r\n    watch,\r\n    formState: { errors },\r\n  } = useForm<ProfileForm>({\r\n    defaultValues: {\r\n      nickname: profileUser?.nickname || '',\r\n      signature: profileUser?.signature || '',\r\n      bio: profileUser?.bio || '',\r\n      birthday: profileUser?.birthday || '',\r\n      gender: profileUser?.gender || '',\r\n      location: profileUser?.location || '',\r\n    },\r\n  });\r\n\r\n  // 当用户数据加载完成时重置表单\r\n  useEffect(() => {\r\n    if (profileUser) {\r\n      reset({\r\n        nickname: profileUser.nickname || '',\r\n        signature: profileUser.signature || '',\r\n        bio: profileUser.bio || '',\r\n        birthday: profileUser.birthday || '',\r\n        gender: profileUser.gender || '',\r\n        location: profileUser.location || '',\r\n      });\r\n    }\r\n  }, [profileUser, reset]);\r\n\r\n  const handleAvatarChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = event.target.files?.[0];\r\n    if (file) {\r\n      if (file.size > 5 * 1024 * 1024) {\r\n        toast.error('头像文件不能超过5MB');\r\n        return;\r\n      }\r\n\r\n      const reader = new FileReader();\r\n      reader.onload = (e) => {\r\n        setAvatarPreview(e.target?.result as string);\r\n      };\r\n      reader.readAsDataURL(file);\r\n\r\n      // 立即上传头像\r\n      uploadAvatarMutation.mutate(file);\r\n    }\r\n  };\r\n\r\n  const onSubmit = async (data: ProfileForm) => {\r\n    updateUserMutation.mutate(data);\r\n  };\r\n\r\n  const handleFollow = () => {\r\n    if (targetUserId) {\r\n      followMutation.mutate(targetUserId);\r\n    }\r\n  };\r\n\r\n  const handleDeletePost = (postId: number, postTitle: string) => {\r\n    setDeleteConfirm({ show: true, postId, postTitle });\r\n  };\r\n\r\n  const confirmDeletePost = () => {\r\n    if (deleteConfirm.postId) {\r\n      deletePostMutation.mutate(deleteConfirm.postId);\r\n    }\r\n  };\r\n\r\n  const cancelDeletePost = () => {\r\n    setDeleteConfirm({ show: false, postId: null, postTitle: '' });\r\n  };\r\n\r\n  const formatDate = (dateString: string) => {\r\n    return new Date(dateString).toLocaleDateString('zh-CN', {\r\n      year: 'numeric',\r\n      month: 'long',\r\n      day: 'numeric'\r\n    });\r\n  };\r\n\r\n  const getGenderText = (gender: string) => {\r\n    switch (gender) {\r\n      case 'male': return '男';\r\n      case 'female': return '女';\r\n      case 'other': return '其他';\r\n      default: return '未设置';\r\n    }\r\n  };\r\n\r\n  const getAge = (birthday: string) => {\r\n    if (!birthday) return null;\r\n    const today = new Date();\r\n    const birthDate = new Date(birthday);\r\n    let age = today.getFullYear() - birthDate.getFullYear();\r\n    const monthDiff = today.getMonth() - birthDate.getMonth();\r\n    if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birthDate.getDate())) {\r\n      age--;\r\n    }\r\n    return age;\r\n  };\r\n\r\n  const renderTabContent = () => {\r\n    switch (activeTab) {\r\n      case 'posts':\r\n        if (postsLoading) {\r\n          return <div className=\"text-center py-8 text-gray-500\">加载中...</div>;\r\n        }\r\n        \r\n        if (!userPosts?.results?.length) {\r\n          return <div className=\"text-center py-8 text-gray-500\">暂无帖子</div>;\r\n        }\r\n\r\n        return (\r\n          <div className=\"space-y-4\">\r\n            {userPosts.results.map((post: any) => (\r\n              <div key={post.id} className=\"bg-white rounded-lg border border-gray-200 p-4 hover:shadow-md transition-shadow cursor-pointer group\">\r\n                <Link to={`/post/${post.id}`} className=\"block\">\r\n                  <h3 className=\"font-medium text-gray-900 group-hover:text-primary-600 mb-2 transition-colors\">\r\n                    {post.title}\r\n                  </h3>\r\n                  <p className=\"text-gray-600 text-sm mb-3 line-clamp-2\">\r\n                    {post.content}\r\n                  </p>\r\n                  \r\n                  {/* 图片预览 */}\r\n                  {post.images && post.images.length > 0 && (\r\n                    <div className=\"mb-3\">\r\n                      <div className=\"grid grid-cols-3 gap-2\">\r\n                        {post.images.slice(0, 3).map((imageUrl: string, index: number) => (\r\n                          <img\r\n                            key={index}\r\n                            src={imageUrl}\r\n                            alt={`图片 ${index + 1}`}\r\n                            className=\"w-full h-20 object-cover rounded\"\r\n                          />\r\n                        ))}\r\n                      </div>\r\n                      {post.images.length > 3 && (\r\n                        <p className=\"text-xs text-gray-500 mt-1\">\r\n                          还有 {post.images.length - 3} 张图片...\r\n                        </p>\r\n                      )}\r\n                    </div>\r\n                  )}\r\n                </Link>\r\n                \r\n                <div className=\"flex items-center justify-between text-sm text-gray-500\">\r\n                  <div className=\"flex items-center space-x-4\">\r\n                    <span className=\"flex items-center\">\r\n                      <Heart className=\"w-4 h-4 mr-1\" />\r\n                      {post.likes_count || 0}\r\n                    </span>\r\n                    <span className=\"flex items-center\">\r\n                      <MessageSquare className=\"w-4 h-4 mr-1\" />\r\n                      {post.comments_count || 0}\r\n                    </span>\r\n                  </div>\r\n                  <div className=\"flex items-center space-x-2\">\r\n                    <span>{new Date(post.created_at).toLocaleDateString()}</span>\r\n                    {isOwnProfile && (\r\n                      <button\r\n                        onClick={(e) => {\r\n                          e.preventDefault();\r\n                          e.stopPropagation();\r\n                          handleDeletePost(post.id, post.title);\r\n                        }}\r\n                        className=\"text-red-500 hover:text-red-700 p-1 rounded transition-colors\"\r\n                        title=\"删除帖子\"\r\n                      >\r\n                        <Trash2 className=\"w-4 h-4\" />\r\n                      </button>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        );\r\n      \r\n      case 'likes':\r\n        if (likesLoading) {\r\n          return <div className=\"text-center py-8 text-gray-500\">加载中...</div>;\r\n        }\r\n        \r\n        if (!likedPosts?.results?.length) {\r\n          return <div className=\"text-center py-8 text-gray-500\">暂无点赞的帖子</div>;\r\n        }\r\n\r\n        return (\r\n          <div className=\"space-y-4\">\r\n            {likedPosts.results.map((post: any) => (\r\n              <div key={post.id} className=\"bg-white rounded-lg border border-gray-200 p-4 hover:shadow-md transition-shadow cursor-pointer group\">\r\n                <Link to={`/post/${post.id}`} className=\"block\">\r\n                  <h3 className=\"font-medium text-gray-900 group-hover:text-primary-600 mb-2 transition-colors\">\r\n                    {post.title}\r\n                  </h3>\r\n                  <p className=\"text-gray-600 text-sm mb-3 line-clamp-2\">\r\n                    {post.content}\r\n                  </p>\r\n                  \r\n                  {/* 图片预览 */}\r\n                  {post.images && post.images.length > 0 && (\r\n                    <div className=\"mb-3\">\r\n                      <div className=\"grid grid-cols-3 gap-2\">\r\n                        {post.images.slice(0, 3).map((imageUrl: string, index: number) => (\r\n                          <img\r\n                            key={index}\r\n                            src={imageUrl}\r\n                            alt={`图片 ${index + 1}`}\r\n                            className=\"w-full h-20 object-cover rounded\"\r\n                          />\r\n                        ))}\r\n                      </div>\r\n                      {post.images.length > 3 && (\r\n                        <p className=\"text-xs text-gray-500 mt-1\">\r\n                          还有 {post.images.length - 3} 张图片...\r\n                        </p>\r\n                      )}\r\n                    </div>\r\n                  )}\r\n                </Link>\r\n                \r\n                <div className=\"flex items-center justify-between text-sm text-gray-500\">\r\n                  <div className=\"flex items-center space-x-4\">\r\n                    <span className=\"flex items-center text-red-500\">\r\n                      <Heart className=\"w-4 h-4 mr-1 fill-current\" />\r\n                      已点赞\r\n                    </span>\r\n                    <span className=\"flex items-center\">\r\n                      <MessageSquare className=\"w-4 h-4 mr-1\" />\r\n                      {post.comments_count || 0}\r\n                    </span>\r\n                  </div>\r\n                  <span>{new Date(post.created_at).toLocaleDateString()}</span>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        );\r\n      \r\n      case 'following':\r\n        if (followingLoading) {\r\n          return <div className=\"text-center py-8 text-gray-500\">加载中...</div>;\r\n        }\r\n        \r\n        if (!followingData?.results?.length) {\r\n          return <div className=\"text-center py-8 text-gray-500\">暂无关注的用户</div>;\r\n        }\r\n\r\n        return (\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n            {followingData.results.map((followUser: any) => (\r\n              <div key={followUser.id} className=\"bg-white rounded-lg border border-gray-200 p-4\">\r\n                <div className=\"flex items-center space-x-3\">\r\n                  <img\r\n                    src={followUser.avatar_url}\r\n                    alt={followUser.nickname}\r\n                    className=\"w-12 h-12 rounded-full\"\r\n                  />\r\n                  <div className=\"flex-1\">\r\n                    <Link\r\n                      to={`/profile/${followUser.id}`}\r\n                      className=\"font-medium text-gray-900 hover:text-primary-600\"\r\n                    >\r\n                      {followUser.nickname}\r\n                    </Link>\r\n                    <p className=\"text-sm text-gray-600 mt-1\">{followUser.signature}</p>\r\n                    <p className=\"text-xs text-gray-500 mt-1\">\r\n                      {followUser.followers_count} 粉丝\r\n                    </p>\r\n                  </div>\r\n                  <button className=\"px-3 py-1 text-sm bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200\">\r\n                    已关注\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        );\r\n      \r\n      case 'followers':\r\n        if (followersLoading) {\r\n          return <div className=\"text-center py-8 text-gray-500\">加载中...</div>;\r\n        }\r\n        \r\n        if (!followersData?.results?.length) {\r\n          return <div className=\"text-center py-8 text-gray-500\">暂无粉丝</div>;\r\n        }\r\n\r\n        return (\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n            {followersData.results.map((follower: any) => (\r\n              <div key={follower.id} className=\"bg-white rounded-lg border border-gray-200 p-4\">\r\n                <div className=\"flex items-center space-x-3\">\r\n                  <img\r\n                    src={follower.avatar_url}\r\n                    alt={follower.nickname}\r\n                    className=\"w-12 h-12 rounded-full\"\r\n                  />\r\n                  <div className=\"flex-1\">\r\n                    <Link\r\n                      to={`/profile/${follower.id}`}\r\n                      className=\"font-medium text-gray-900 hover:text-primary-600\"\r\n                    >\r\n                      {follower.nickname}\r\n                    </Link>\r\n                    <p className=\"text-sm text-gray-600 mt-1\">{follower.signature}</p>\r\n                    <p className=\"text-xs text-gray-500 mt-1\">\r\n                      {follower.followers_count} 粉丝\r\n                    </p>\r\n                  </div>\r\n                  <button className=\"px-3 py-1 text-sm bg-primary-600 text-white rounded-md hover:bg-primary-700\">\r\n                    关注\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        );\r\n      \r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n\r\n  if (userLoading) {\r\n    return (\r\n      <div className=\"max-w-4xl mx-auto py-6\">\r\n        <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\r\n          <div className=\"animate-pulse\">\r\n            <div className=\"h-32 bg-gray-300 rounded-t-lg mb-4\"></div>\r\n            <div className=\"flex items-center space-x-4\">\r\n              <div className=\"w-32 h-32 bg-gray-300 rounded-full\"></div>\r\n              <div className=\"flex-1\">\r\n                <div className=\"h-6 bg-gray-300 rounded w-1/3 mb-2\"></div>\r\n                <div className=\"h-4 bg-gray-300 rounded w-1/2\"></div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!profileUser) {\r\n    return (\r\n      <div className=\"max-w-4xl mx-auto py-6\">\r\n        <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6 text-center\">\r\n          <p className=\"text-gray-500\">用户不存在</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"max-w-4xl mx-auto py-6\">\r\n      {/* 个人资料卡片 */}\r\n      <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 mb-6\">\r\n        {/* 背景图 */}\r\n        <div \r\n          className=\"h-48 bg-gradient-to-r from-primary-400 to-primary-600 rounded-t-lg relative\"\r\n          style={{\r\n            backgroundImage: profileUser.background_url ? `url(${profileUser.background_url})` : undefined,\r\n            backgroundSize: 'cover',\r\n            backgroundPosition: 'center'\r\n          }}\r\n        >\r\n        </div>\r\n\r\n        <div className=\"px-6 pb-6\">\r\n          {/* 头像和基本信息 */}\r\n          <div className=\"flex flex-col sm:flex-row sm:items-end sm:space-x-6 -mt-16 relative\">\r\n            <div className=\"relative\">\r\n              <img\r\n                src={avatarPreview || profileUser?.avatar_url || '/default-avatar.svg'}\r\n                alt={profileUser?.nickname || '用户'}\r\n                className=\"w-32 h-32 rounded-full border-4 border-white shadow-lg\"\r\n                onError={(e) => {\r\n                  // 如果头像加载失败，使用默认头像\r\n                  e.currentTarget.src = '/default-avatar.svg';\r\n                }}\r\n              />\r\n              \r\n              {isOwnProfile && (\r\n                <button\r\n                  onClick={() => fileInputRef.current?.click()}\r\n                  disabled={uploadAvatarMutation.isLoading}\r\n                  className=\"absolute bottom-2 right-2 p-2 bg-primary-600 text-white rounded-full hover:bg-primary-700 disabled:opacity-50\"\r\n                >\r\n                  <Camera className=\"w-4 h-4\" />\r\n                </button>\r\n              )}\r\n              <input\r\n                ref={fileInputRef}\r\n                type=\"file\"\r\n                accept=\"image/*\"\r\n                onChange={handleAvatarChange}\r\n                className=\"hidden\"\r\n              />\r\n            </div>\r\n\r\n            <div className=\"flex-1 mt-4 sm:mt-0\">\r\n              <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between\">\r\n                <div>\r\n                  <h1 className=\"text-2xl font-bold text-gray-900\">{profileUser.nickname}</h1>\r\n                  <p className=\"text-gray-600 mt-1\">{profileUser.signature}</p>\r\n                  <p className=\"text-sm text-gray-500 mt-2\">{profileUser.bio}</p>\r\n                  \r\n                  {/* 详细信息 */}\r\n                  <div className=\"mt-3 space-y-1\">\r\n                    {profileUser.birthday && (\r\n                      <div className=\"flex items-center text-sm text-gray-600\">\r\n                        <Calendar className=\"w-4 h-4 mr-2\" />\r\n                        {formatDate(profileUser.birthday)}\r\n                        {getAge(profileUser.birthday) && (\r\n                          <span className=\"ml-2 text-gray-500\">({getAge(profileUser.birthday)}岁)</span>\r\n                        )}\r\n                      </div>\r\n                    )}\r\n                    {profileUser.gender && (\r\n                      <div className=\"flex items-center text-sm text-gray-600\">\r\n                        <Users className=\"w-4 h-4 mr-2\" />\r\n                        {getGenderText(profileUser.gender)}\r\n                      </div>\r\n                    )}\r\n                    {profileUser.location && (\r\n                      <div className=\"flex items-center text-sm text-gray-600\">\r\n                        <MapPin className=\"w-4 h-4 mr-2\" />\r\n                        {profileUser.location}\r\n                      </div>\r\n                    )}\r\n                    <div className=\"flex items-center text-sm text-gray-600\">\r\n                      <Calendar className=\"w-4 h-4 mr-2\" />\r\n                      加入于 {formatDate(profileUser.created_at)}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                \r\n                <div className=\"flex items-center space-x-3 mt-4 sm:mt-0\">\r\n                  {isOwnProfile ? (\r\n                    <button\r\n                      onClick={() => setIsEditing(!isEditing)}\r\n                      className=\"flex items-center px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200\"\r\n                    >\r\n                      {isEditing ? <X className=\"w-4 h-4 mr-2\" /> : <Edit3 className=\"w-4 h-4 mr-2\" />}\r\n                      {isEditing ? '取消' : '编辑资料'}\r\n                    </button>\r\n                  ) : (\r\n                    <>\r\n                      <button\r\n                        onClick={handleFollow}\r\n                        disabled={followMutation.isLoading}\r\n                        className={`flex items-center px-4 py-2 rounded-md disabled:opacity-50 ${\r\n                          profileUser.is_following\r\n                            ? 'bg-gray-100 text-gray-700 hover:bg-gray-200'\r\n                            : 'bg-primary-600 text-white hover:bg-primary-700'\r\n                        }`}\r\n                      >\r\n                        {followMutation.isLoading ? (\r\n                          '处理中...'\r\n                        ) : (\r\n                          <>\r\n                            {profileUser.is_following ? (\r\n                              <UserMinus className=\"w-4 h-4 mr-2\" />\r\n                            ) : (\r\n                              <UserPlus className=\"w-4 h-4 mr-2\" />\r\n                            )}\r\n                            {profileUser.is_following ? '已关注' : '关注'}\r\n                          </>\r\n                        )}\r\n                      </button>\r\n                      <Link\r\n                        to={`/chat/${profileUser.id}`}\r\n                        className=\"flex items-center px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200\"\r\n                      >\r\n                        <MessageSquare className=\"w-4 h-4 mr-2\" />\r\n                        私信\r\n                      </Link>\r\n                      <button className=\"flex items-center px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200\">\r\n                        <Flag className=\"w-4 h-4 mr-2\" />\r\n                        举报\r\n                      </button>\r\n                    </>\r\n                  )}\r\n                </div>\r\n              </div>\r\n\r\n              {/* 统计数据 */}\r\n              <div className=\"flex items-center space-x-6 mt-4\">\r\n                <div className=\"text-center\">\r\n                  <div className=\"text-xl font-bold text-gray-900\">{profileUser.posts_count || 0}</div>\r\n                  <div className=\"text-sm text-gray-500\">帖子</div>\r\n                </div>\r\n                <div className=\"text-center\">\r\n                  <div className=\"text-xl font-bold text-gray-900\">{profileUser.followers_count || 0}</div>\r\n                  <div className=\"text-sm text-gray-500\">粉丝</div>\r\n                </div>\r\n                <div className=\"text-center\">\r\n                  <div className=\"text-xl font-bold text-gray-900\">{profileUser.following_count || 0}</div>\r\n                  <div className=\"text-sm text-gray-500\">关注</div>\r\n                </div>\r\n                <div className=\"text-center\">\r\n                  <div className=\"text-xl font-bold text-gray-900\">{profileUser.likes_received || 0}</div>\r\n                  <div className=\"text-sm text-gray-500\">获赞</div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* 编辑表单 */}\r\n          {isEditing && isOwnProfile && (\r\n            <form onSubmit={handleSubmit(onSubmit)} className=\"mt-6 p-6 bg-gray-50 rounded-lg\">\r\n              <h3 className=\"text-lg font-medium text-gray-900 mb-4\">编辑个人资料</h3>\r\n              \r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                    昵称 *\r\n                  </label>\r\n                  <input\r\n                    {...register('nickname', { required: '请输入昵称' })}\r\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500\"\r\n                    placeholder=\"请输入昵称\"\r\n                  />\r\n                  {errors.nickname && (\r\n                    <p className=\"mt-1 text-sm text-red-600\">{errors.nickname.message}</p>\r\n                  )}\r\n                </div>\r\n                \r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                    性别\r\n                  </label>\r\n                  <select\r\n                    {...register('gender')}\r\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500\"\r\n                  >\r\n                    <option value=\"\">请选择性别</option>\r\n                    <option value=\"male\">男</option>\r\n                    <option value=\"female\">女</option>\r\n                    <option value=\"other\">其他</option>\r\n                  </select>\r\n                </div>\r\n                \r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                    生日\r\n                  </label>\r\n                  <input\r\n                    {...register('birthday')}\r\n                    type=\"date\"\r\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500\"\r\n                  />\r\n                </div>\r\n                \r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                    所在地\r\n                  </label>\r\n                  <input\r\n                    {...register('location')}\r\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500\"\r\n                    placeholder=\"请输入所在地\"\r\n                  />\r\n                </div>\r\n                \r\n                <div className=\"md:col-span-2\">\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                    个性签名\r\n                  </label>\r\n                  <input\r\n                    {...register('signature')}\r\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500\"\r\n                    placeholder=\"写点什么介绍一下自己...\"\r\n                    maxLength={200}\r\n                  />\r\n                </div>\r\n                \r\n              </div>\r\n              \r\n              <div className=\"mt-4\">\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  个人简介\r\n                </label>\r\n                <textarea\r\n                  {...register('bio')}\r\n                  rows={4}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500\"\r\n                  placeholder=\"详细介绍一下自己...\"\r\n                  maxLength={500}\r\n                />\r\n                <div className=\"mt-1 text-right text-sm text-gray-500\">\r\n                  {watch('bio')?.length || 0} / 500\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"flex items-center justify-between mt-6\">\r\n                <div className=\"flex items-center space-x-3\">\r\n                  <button\r\n                    type=\"submit\"\r\n                    disabled={updateUserMutation.isLoading}\r\n                    className=\"flex items-center px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 disabled:opacity-50\"\r\n                  >\r\n                    <Save className=\"w-4 h-4 mr-2\" />\r\n                    {updateUserMutation.isLoading ? '保存中...' : '保存'}\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => {\r\n                      setIsEditing(false);\r\n                      reset();\r\n                    }}\r\n                    className=\"px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200\"\r\n                  >\r\n                    取消\r\n                  </button>\r\n                </div>\r\n                \r\n                <div className=\"flex items-center space-x-2 text-sm text-gray-500\">\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => setShowPrivateInfo(!showPrivateInfo)}\r\n                    className=\"flex items-center hover:text-gray-700\"\r\n                  >\r\n                    {showPrivateInfo ? <EyeOff className=\"w-4 h-4 mr-1\" /> : <Eye className=\"w-4 h-4 mr-1\" />}\r\n                    {showPrivateInfo ? '隐藏' : '显示'}隐私信息\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </form>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* 标签页 */}\r\n      <div className=\"bg-white rounded-lg shadow-sm border border-gray-200\">\r\n        <div className=\"border-b border-gray-200\">\r\n          <nav className=\"flex space-x-8 px-6\">\r\n            <button\r\n              onClick={() => setActiveTab('posts')}\r\n              className={`py-4 px-1 border-b-2 font-medium text-sm ${\r\n                activeTab === 'posts'\r\n                  ? 'border-primary-500 text-primary-600'\r\n                  : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\r\n              }`}\r\n            >\r\n              <FileText className=\"w-4 h-4 inline mr-2\" />\r\n              我的帖子 ({profileUser.posts_count || 0})\r\n            </button>\r\n            <button\r\n              onClick={() => setActiveTab('likes')}\r\n              className={`py-4 px-1 border-b-2 font-medium text-sm ${\r\n                activeTab === 'likes'\r\n                  ? 'border-primary-500 text-primary-600'\r\n                  : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\r\n              }`}\r\n            >\r\n              <Heart className=\"w-4 h-4 inline mr-2\" />\r\n              我的点赞\r\n            </button>\r\n            <button\r\n              onClick={() => setActiveTab('following')}\r\n              className={`py-4 px-1 border-b-2 font-medium text-sm ${\r\n                activeTab === 'following'\r\n                  ? 'border-primary-500 text-primary-600'\r\n                  : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\r\n              }`}\r\n            >\r\n              <Users className=\"w-4 h-4 inline mr-2\" />\r\n              我的关注 ({profileUser.following_count || 0})\r\n            </button>\r\n            <button\r\n              onClick={() => setActiveTab('followers')}\r\n              className={`py-4 px-1 border-b-2 font-medium text-sm ${\r\n                activeTab === 'followers'\r\n                  ? 'border-primary-500 text-primary-600'\r\n                  : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\r\n              }`}\r\n            >\r\n              <Users className=\"w-4 h-4 inline mr-2\" />\r\n              我的粉丝 ({profileUser.followers_count || 0})\r\n            </button>\r\n          </nav>\r\n        </div>\r\n\r\n        <div className=\"p-6\">\r\n          {renderTabContent()}\r\n        </div>\r\n      </div>\r\n\r\n      {/* 删除确认对话框 */}\r\n      {deleteConfirm.show && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\r\n          <div className=\"bg-white rounded-lg p-6 max-w-md w-full mx-4\">\r\n            <div className=\"flex items-center mb-4\">\r\n              <div className=\"flex-shrink-0 w-10 h-10 mx-auto bg-red-100 rounded-full flex items-center justify-center\">\r\n                <Trash2 className=\"w-6 h-6 text-red-600\" />\r\n              </div>\r\n            </div>\r\n            <div className=\"text-center\">\r\n              <h3 className=\"text-lg font-medium text-gray-900 mb-2\">\r\n                删除帖子\r\n              </h3>\r\n              <p className=\"text-sm text-gray-500 mb-4\">\r\n                确定要删除帖子 <strong>\"{deleteConfirm.postTitle}\"</strong> 吗？此操作无法撤销。\r\n              </p>\r\n              <div className=\"flex space-x-3\">\r\n                <button\r\n                  onClick={cancelDeletePost}\r\n                  className=\"flex-1 bg-gray-100 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-200 transition-colors\"\r\n                >\r\n                  取消\r\n                </button>\r\n                <button\r\n                  onClick={confirmDeletePost}\r\n                  disabled={deletePostMutation.isLoading}\r\n                  className=\"flex-1 bg-red-600 text-white px-4 py-2 rounded-md hover:bg-red-700 disabled:opacity-50 transition-colors\"\r\n                >\r\n                  {deletePostMutation.isLoading ? '删除中...' : '删除'}\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Profile;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}