{"ast":null,"code":"import apiClient from './client';\nexport const postsApi = {\n  // 获取帖子列表\n  getPosts: async (filters = {}) => {\n    const params = new URLSearchParams();\n    if (filters.post_type) params.append('post_type', filters.post_type);\n    if (filters.author_id) params.append('author_id', filters.author_id.toString());\n    if (filters.search) params.append('search', filters.search);\n    if (filters.ordering) params.append('ordering', filters.ordering);\n    const response = await apiClient.get(`/posts/posts/?${params.toString()}`);\n    return response.data;\n  },\n  // 获取帖子详情\n  getPost: async postId => {\n    const response = await apiClient.get(`/posts/posts/${postId}/`);\n    return response.data;\n  },\n  // 创建帖子\n  createPost: async data => {\n    const formData = new FormData();\n    formData.append('title', data.title);\n    formData.append('content', data.content);\n    formData.append('post_type', data.post_type);\n    data.images.forEach((image, index) => {\n      formData.append(`images`, image);\n    });\n    const response = await apiClient.post('/posts/posts/', formData, {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      }\n    });\n    return response.data;\n  },\n  // 更新帖子\n  updatePost: async (postId, data) => {\n    const response = await apiClient.patch(`/posts/posts/${postId}/`, data);\n    return response.data;\n  },\n  // 删除帖子\n  deletePost: async postId => {\n    await apiClient.delete(`/posts/posts/${postId}/`);\n  },\n  // 点赞/取消点赞帖子\n  toggleLike: async postId => {\n    const response = await apiClient.post(`/posts/posts/${postId}/like/`);\n    return response.data;\n  },\n  // 收藏/取消收藏帖子\n  toggleBookmark: async postId => {\n    const response = await apiClient.post(`/posts/posts/${postId}/bookmark/`);\n    return response.data;\n  },\n  // 分享帖子\n  sharePost: async (postId, platform) => {\n    await apiClient.post(`/posts/posts/${postId}/share/`, {\n      platform\n    });\n  },\n  // 获取热门帖子\n  getTrendingPosts: async () => {\n    const response = await apiClient.get('/posts/posts/trending/');\n    return response.data;\n  },\n  // 获取推荐帖子\n  getRecommendedPosts: async () => {\n    const response = await apiClient.get('/posts/posts/recommended/');\n    return response.data;\n  }\n};","map":{"version":3,"names":["apiClient","postsApi","getPosts","filters","params","URLSearchParams","post_type","append","author_id","toString","search","ordering","response","get","data","getPost","postId","createPost","formData","FormData","title","content","images","forEach","image","index","post","headers","updatePost","patch","deletePost","delete","toggleLike","toggleBookmark","sharePost","platform","getTrendingPosts","getRecommendedPosts"],"sources":["D:/miko/frontend/src/api/posts.ts"],"sourcesContent":["import apiClient from './client';\r\nimport { Post, CreatePostRequest, PostFilters } from '../types/post';\r\n\r\nexport const postsApi = {\r\n  // 获取帖子列表\r\n  getPosts: async (filters: PostFilters = {}): Promise<{ results: Post[]; count: number; next: string | null }> => {\r\n    const params = new URLSearchParams();\r\n    \r\n    if (filters.post_type) params.append('post_type', filters.post_type);\r\n    if (filters.author_id) params.append('author_id', filters.author_id.toString());\r\n    if (filters.search) params.append('search', filters.search);\r\n    if (filters.ordering) params.append('ordering', filters.ordering);\r\n    \r\n    const response = await apiClient.get(`/posts/posts/?${params.toString()}`);\r\n    return response.data;\r\n  },\r\n\r\n  // 获取帖子详情\r\n  getPost: async (postId: number): Promise<Post> => {\r\n    const response = await apiClient.get(`/posts/posts/${postId}/`);\r\n    return response.data;\r\n  },\r\n\r\n  // 创建帖子\r\n  createPost: async (data: CreatePostRequest): Promise<Post> => {\r\n    const formData = new FormData();\r\n    formData.append('title', data.title);\r\n    formData.append('content', data.content);\r\n    formData.append('post_type', data.post_type);\r\n    \r\n    data.images.forEach((image, index) => {\r\n      formData.append(`images`, image);\r\n    });\r\n    \r\n    const response = await apiClient.post('/posts/posts/', formData, {\r\n      headers: {\r\n        'Content-Type': 'multipart/form-data',\r\n      },\r\n    });\r\n    return response.data;\r\n  },\r\n\r\n  // 更新帖子\r\n  updatePost: async (postId: number, data: Partial<CreatePostRequest>): Promise<Post> => {\r\n    const response = await apiClient.patch(`/posts/posts/${postId}/`, data);\r\n    return response.data;\r\n  },\r\n\r\n  // 删除帖子\r\n  deletePost: async (postId: number): Promise<void> => {\r\n    await apiClient.delete(`/posts/posts/${postId}/`);\r\n  },\r\n\r\n  // 点赞/取消点赞帖子\r\n  toggleLike: async (postId: number): Promise<{ status: string; likes_count: number }> => {\r\n    const response = await apiClient.post(`/posts/posts/${postId}/like/`);\r\n    return response.data;\r\n  },\r\n\r\n  // 收藏/取消收藏帖子\r\n  toggleBookmark: async (postId: number): Promise<{ status: string; bookmarks_count: number }> => {\r\n    const response = await apiClient.post(`/posts/posts/${postId}/bookmark/`);\r\n    return response.data;\r\n  },\r\n\r\n  // 分享帖子\r\n  sharePost: async (postId: number, platform: string): Promise<void> => {\r\n    await apiClient.post(`/posts/posts/${postId}/share/`, { platform });\r\n  },\r\n\r\n\r\n  // 获取热门帖子\r\n  getTrendingPosts: async (): Promise<Post[]> => {\r\n    const response = await apiClient.get('/posts/posts/trending/');\r\n    return response.data;\r\n  },\r\n\r\n  // 获取推荐帖子\r\n  getRecommendedPosts: async (): Promise<Post[]> => {\r\n    const response = await apiClient.get('/posts/posts/recommended/');\r\n    return response.data;\r\n  },\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}