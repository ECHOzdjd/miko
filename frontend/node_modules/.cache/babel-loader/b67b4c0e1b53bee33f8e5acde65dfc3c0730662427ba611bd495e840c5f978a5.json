{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{useParams,useNavigate}from'react-router-dom';import{useQuery,useMutation,useQueryClient}from'react-query';import{Send,ArrowLeft,MoreVertical}from'lucide-react';import{messagesApi}from'../api/messages';import{useAuthStore}from'../stores/authStore';import toast from'react-hot-toast';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Chat=()=>{const{conversationId}=useParams();const navigate=useNavigate();const queryClient=useQueryClient();const{user}=useAuthStore();const[newMessage,setNewMessage]=useState('');const messagesEndRef=useRef(null);// 获取对话详情\nconst{data:conversation,isLoading:conversationLoading}=useQuery({queryKey:['conversation',conversationId],queryFn:()=>messagesApi.getConversation(Number(conversationId)),enabled:!!conversationId});// 获取消息列表\nconst{data:messagesData,isLoading:messagesLoading}=useQuery({queryKey:['messages',conversationId],queryFn:()=>messagesApi.getMessages(Number(conversationId)),enabled:!!conversationId,refetchInterval:3000// 每3秒刷新一次\n});// 发送消息\nconst sendMessageMutation=useMutation({mutationFn:content=>messagesApi.sendMessage(Number(conversationId),content),onSuccess:()=>{setNewMessage('');queryClient.invalidateQueries(['messages',conversationId]);queryClient.invalidateQueries(['conversations']);},onError:error=>{console.error('发送消息失败:',error);toast.error('发送消息失败，请稍后重试');}});// 标记消息为已读\nconst markReadMutation=useMutation({mutationFn:()=>messagesApi.markMessagesRead(Number(conversationId)),onSuccess:()=>{queryClient.invalidateQueries(['conversations']);}});// 自动滚动到底部\nconst scrollToBottom=()=>{var _messagesEndRef$curre;(_messagesEndRef$curre=messagesEndRef.current)===null||_messagesEndRef$curre===void 0?void 0:_messagesEndRef$curre.scrollIntoView({behavior:'smooth'});};useEffect(()=>{scrollToBottom();},[messagesData===null||messagesData===void 0?void 0:messagesData.results]);// 当进入对话时标记为已读\nuseEffect(()=>{if(conversationId&&conversation&&conversation.unread_count>0){markReadMutation.mutate();}},[conversationId,conversation,markReadMutation]);const handleSendMessage=e=>{e.preventDefault();if(!newMessage.trim())return;sendMessageMutation.mutate(newMessage);};const formatTime=dateString=>{const date=new Date(dateString);const now=new Date();const diff=now.getTime()-date.getTime();if(diff<60000){// 1分钟内\nreturn'刚刚';}else if(diff<3600000){// 1小时内\nreturn\"\".concat(Math.floor(diff/60000),\"\\u5206\\u949F\\u524D\");}else if(diff<86400000){// 24小时内\nreturn\"\".concat(Math.floor(diff/3600000),\"\\u5C0F\\u65F6\\u524D\");}else{return date.toLocaleDateString('zh-CN');}};if(conversationLoading||messagesLoading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-64\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-500\",children:\"\\u52A0\\u8F7D\\u4E2D...\"})});}if(!conversation){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-64\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-500\",children:\"\\u5BF9\\u8BDD\\u4E0D\\u5B58\\u5728\"})});}const otherUser=conversation.other_participant;const messages=(messagesData===null||messagesData===void 0?void 0:messagesData.results)||[];return/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col h-screen bg-gray-50\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white border-b border-gray-200 px-4 py-3 flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate(-1),className:\"p-2 hover:bg-gray-100 rounded-full\",children:/*#__PURE__*/_jsx(ArrowLeft,{className:\"w-5 h-5\"})}),/*#__PURE__*/_jsx(\"img\",{src:(otherUser===null||otherUser===void 0?void 0:otherUser.avatar_url)||'/default-avatar.svg',alt:otherUser===null||otherUser===void 0?void 0:otherUser.nickname,className:\"w-10 h-10 rounded-full\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"font-semibold text-gray-900\",children:otherUser===null||otherUser===void 0?void 0:otherUser.nickname}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:\"\\u5728\\u7EBF\"})]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"p-2 hover:bg-gray-100 rounded-full\",children:/*#__PURE__*/_jsx(MoreVertical,{className:\"w-5 h-5\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 overflow-y-auto px-4 py-4 space-y-4\",children:[messages.map(message=>{const isOwn=message.sender.id===(user===null||user===void 0?void 0:user.id);return/*#__PURE__*/_jsx(\"div\",{className:\"flex \".concat(isOwn?'justify-end':'justify-start'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-xs lg:max-w-md px-4 py-2 rounded-lg \".concat(isOwn?'bg-primary-600 text-white':'bg-white text-gray-900 border border-gray-200'),children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm\",children:message.content}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs mt-1 \".concat(isOwn?'text-primary-100':'text-gray-500'),children:formatTime(message.created_at)})]})},message.id);}),/*#__PURE__*/_jsx(\"div\",{ref:messagesEndRef})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white border-t border-gray-200 px-4 py-3\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSendMessage,className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newMessage,onChange:e=>setNewMessage(e.target.value),placeholder:\"\\u8F93\\u5165\\u6D88\\u606F...\",className:\"flex-1 border border-gray-300 rounded-full px-4 py-2 focus:ring-primary-500 focus:border-primary-500\",disabled:sendMessageMutation.isLoading}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:!newMessage.trim()||sendMessageMutation.isLoading,className:\"bg-primary-600 text-white p-2 rounded-full hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed\",children:/*#__PURE__*/_jsx(Send,{className:\"w-5 h-5\"})})]})})]});};export default Chat;","map":{"version":3,"names":["React","useState","useEffect","useRef","useParams","useNavigate","useQuery","useMutation","useQueryClient","Send","ArrowLeft","MoreVertical","messagesApi","useAuthStore","toast","jsx","_jsx","jsxs","_jsxs","Chat","conversationId","navigate","queryClient","user","newMessage","setNewMessage","messagesEndRef","data","conversation","isLoading","conversationLoading","queryKey","queryFn","getConversation","Number","enabled","messagesData","messagesLoading","getMessages","refetchInterval","sendMessageMutation","mutationFn","content","sendMessage","onSuccess","invalidateQueries","onError","error","console","markReadMutation","markMessagesRead","scrollToBottom","_messagesEndRef$curre","current","scrollIntoView","behavior","results","unread_count","mutate","handleSendMessage","e","preventDefault","trim","formatTime","dateString","date","Date","now","diff","getTime","concat","Math","floor","toLocaleDateString","className","children","otherUser","other_participant","messages","onClick","src","avatar_url","alt","nickname","map","message","isOwn","sender","id","created_at","ref","onSubmit","type","value","onChange","target","placeholder","disabled"],"sources":["D:/miko/frontend/src/pages/Chat.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { useQuery, useMutation, useQueryClient } from 'react-query';\r\nimport { Send, ArrowLeft, MoreVertical } from 'lucide-react';\r\nimport { messagesApi, Message } from '../api/messages';\r\nimport { useAuthStore } from '../stores/authStore';\r\nimport toast from 'react-hot-toast';\r\n\r\nconst Chat: React.FC = () => {\r\n  const { conversationId } = useParams<{ conversationId: string }>();\r\n  const navigate = useNavigate();\r\n  const queryClient = useQueryClient();\r\n  const { user } = useAuthStore();\r\n  const [newMessage, setNewMessage] = useState('');\r\n  const messagesEndRef = useRef<HTMLDivElement>(null);\r\n\r\n  // 获取对话详情\r\n  const { data: conversation, isLoading: conversationLoading } = useQuery({\r\n    queryKey: ['conversation', conversationId],\r\n    queryFn: () => messagesApi.getConversation(Number(conversationId)),\r\n    enabled: !!conversationId,\r\n  });\r\n\r\n  // 获取消息列表\r\n  const { data: messagesData, isLoading: messagesLoading } = useQuery({\r\n    queryKey: ['messages', conversationId],\r\n    queryFn: () => messagesApi.getMessages(Number(conversationId)),\r\n    enabled: !!conversationId,\r\n    refetchInterval: 3000, // 每3秒刷新一次\r\n  });\r\n\r\n  // 发送消息\r\n  const sendMessageMutation = useMutation({\r\n    mutationFn: (content: string) => messagesApi.sendMessage(Number(conversationId), content),\r\n    onSuccess: () => {\r\n      setNewMessage('');\r\n      queryClient.invalidateQueries(['messages', conversationId]);\r\n      queryClient.invalidateQueries(['conversations']);\r\n    },\r\n    onError: (error: any) => {\r\n      console.error('发送消息失败:', error);\r\n      toast.error('发送消息失败，请稍后重试');\r\n    },\r\n  });\r\n\r\n  // 标记消息为已读\r\n  const markReadMutation = useMutation({\r\n    mutationFn: () => messagesApi.markMessagesRead(Number(conversationId)),\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries(['conversations']);\r\n    },\r\n  });\r\n\r\n  // 自动滚动到底部\r\n  const scrollToBottom = () => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n  };\r\n\r\n  useEffect(() => {\r\n    scrollToBottom();\r\n  }, [messagesData?.results]);\r\n\r\n  // 当进入对话时标记为已读\r\n  useEffect(() => {\r\n    if (conversationId && conversation && conversation.unread_count > 0) {\r\n      markReadMutation.mutate();\r\n    }\r\n  }, [conversationId, conversation, markReadMutation]);\r\n\r\n  const handleSendMessage = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!newMessage.trim()) return;\r\n    \r\n    sendMessageMutation.mutate(newMessage);\r\n  };\r\n\r\n  const formatTime = (dateString: string) => {\r\n    const date = new Date(dateString);\r\n    const now = new Date();\r\n    const diff = now.getTime() - date.getTime();\r\n    \r\n    if (diff < 60000) { // 1分钟内\r\n      return '刚刚';\r\n    } else if (diff < 3600000) { // 1小时内\r\n      return `${Math.floor(diff / 60000)}分钟前`;\r\n    } else if (diff < 86400000) { // 24小时内\r\n      return `${Math.floor(diff / 3600000)}小时前`;\r\n    } else {\r\n      return date.toLocaleDateString('zh-CN');\r\n    }\r\n  };\r\n\r\n  if (conversationLoading || messagesLoading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center h-64\">\r\n        <div className=\"text-gray-500\">加载中...</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!conversation) {\r\n    return (\r\n      <div className=\"flex items-center justify-center h-64\">\r\n        <div className=\"text-gray-500\">对话不存在</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const otherUser = conversation.other_participant;\r\n  const messages = messagesData?.results || [];\r\n\r\n  return (\r\n    <div className=\"flex flex-col h-screen bg-gray-50\">\r\n      {/* 头部 */}\r\n      <div className=\"bg-white border-b border-gray-200 px-4 py-3 flex items-center justify-between\">\r\n        <div className=\"flex items-center space-x-3\">\r\n          <button\r\n            onClick={() => navigate(-1)}\r\n            className=\"p-2 hover:bg-gray-100 rounded-full\"\r\n          >\r\n            <ArrowLeft className=\"w-5 h-5\" />\r\n          </button>\r\n          <img\r\n            src={otherUser?.avatar_url || '/default-avatar.svg'}\r\n            alt={otherUser?.nickname}\r\n            className=\"w-10 h-10 rounded-full\"\r\n          />\r\n          <div>\r\n            <h2 className=\"font-semibold text-gray-900\">{otherUser?.nickname}</h2>\r\n            <p className=\"text-sm text-gray-500\">在线</p>\r\n          </div>\r\n        </div>\r\n        <button className=\"p-2 hover:bg-gray-100 rounded-full\">\r\n          <MoreVertical className=\"w-5 h-5\" />\r\n        </button>\r\n      </div>\r\n\r\n      {/* 消息列表 */}\r\n      <div className=\"flex-1 overflow-y-auto px-4 py-4 space-y-4\">\r\n        {messages.map((message: Message) => {\r\n          const isOwn = message.sender.id === user?.id;\r\n          return (\r\n            <div\r\n              key={message.id}\r\n              className={`flex ${isOwn ? 'justify-end' : 'justify-start'}`}\r\n            >\r\n              <div\r\n                className={`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${\r\n                  isOwn\r\n                    ? 'bg-primary-600 text-white'\r\n                    : 'bg-white text-gray-900 border border-gray-200'\r\n                }`}\r\n              >\r\n                <p className=\"text-sm\">{message.content}</p>\r\n                <p\r\n                  className={`text-xs mt-1 ${\r\n                    isOwn ? 'text-primary-100' : 'text-gray-500'\r\n                  }`}\r\n                >\r\n                  {formatTime(message.created_at)}\r\n                </p>\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n        <div ref={messagesEndRef} />\r\n      </div>\r\n\r\n      {/* 输入框 */}\r\n      <div className=\"bg-white border-t border-gray-200 px-4 py-3\">\r\n        <form onSubmit={handleSendMessage} className=\"flex items-center space-x-3\">\r\n          <input\r\n            type=\"text\"\r\n            value={newMessage}\r\n            onChange={(e) => setNewMessage(e.target.value)}\r\n            placeholder=\"输入消息...\"\r\n            className=\"flex-1 border border-gray-300 rounded-full px-4 py-2 focus:ring-primary-500 focus:border-primary-500\"\r\n            disabled={sendMessageMutation.isLoading}\r\n          />\r\n          <button\r\n            type=\"submit\"\r\n            disabled={!newMessage.trim() || sendMessageMutation.isLoading}\r\n            className=\"bg-primary-600 text-white p-2 rounded-full hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n          >\r\n            <Send className=\"w-5 h-5\" />\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Chat;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}